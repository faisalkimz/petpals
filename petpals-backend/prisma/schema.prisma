// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model User {
  id        String     @id @default(cuid())
  email     String     @unique
  password  String
  name      String
  avatar    String?
  favorites Favorite[]
  createdAt DateTime   @default(now())
  updatedAt DateTime   @updatedAt

  @@map("users")
}

model Pet {
  id          String     @id @default(cuid())
  name        String
  species     String // Dog, Cat, Bird, Fish, etc.
  breed       String
  age         Int // age in months
  gender      String // Male, Female
  size        String // Small, Medium, Large
  distance    Float // km from user
  price       Int // adoption fee in dollars
  description String     @db.Text
  images      Json // array of image URLs
  shelter     String
  tags        Json // ["Good with kids", "Energetic", etc.]
  categoryId  String
  category    Category   @relation(fields: [categoryId], references: [id])
  favorites   Favorite[]
  createdAt   DateTime   @default(now())
  updatedAt   DateTime   @updatedAt

  @@map("pets")
}

model Category {
  id   String @id @default(cuid())
  name String @unique
  icon String
  pets Pet[]

  @@map("categories")
}

model Favorite {
  id        String   @id @default(cuid())
  userId    String
  petId     String
  user      User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  pet       Pet      @relation(fields: [petId], references: [id], onDelete: Cascade)
  createdAt DateTime @default(now())

  @@unique([userId, petId])
  @@map("favorites")
}
